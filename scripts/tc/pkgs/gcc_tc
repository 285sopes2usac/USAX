#!/usr/bin/env bash
# SPDX-License-Identifier: BSD-2-Clause

# ---------------------------------------------------------------
# NOTE
#
# This "script" is NOT meant to be executed directly.
# It is included as a source file by scripts/build_toolchain.
#
# ---------------------------------------------------------------

# $1 = arch
# $2 = libc
function get_gcc_tc_installed_status_int {

   local arch_list=""
   local ha=$TC/host_${BUILD_ARCH}
   local pfx

   pfx="${1}_GCC_NAME_PFX"
   pfx=${!pfx}

   if [ -d $ha/${pfx}_$2 ]; then
      echo "installed host_$HOST_ARCH"
   fi
}

function define_all_gcc_tc_funcs {

   for libc in musl; do
      for arch in ${ALL_ARCH_LIST[@]}; do

         local name="download_gcc_${libc}_${arch}"
         local body="get_gcc_tc_installed_status_int $arch $libc;"

         all_funcs_list+=($name)
         eval "function $name { download_gcc_tc_internal $arch $libc; }"
         eval "function ${name}_installed_status { $body }"
      done
   done
}

define_all_gcc_tc_funcs

